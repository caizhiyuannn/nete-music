{"version":3,"sources":["webpack:///./src/views/video/video-detail.vue?fddc","webpack:///src/views/video/video-detail.vue","webpack:///./src/views/video/video-detail.vue?edb2","webpack:///./src/views/video/video-detail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","videodata","title","getPlayListValue","relatedVideo","comments","hotComments","videoURL","playTime","articulation","on","routerpush","staticRenderFns","name","components","NeteDetail","NeteHeader","props","id","type","String","Number","required","data","artists","methods","console","log","beforeRouteUpdate","updatePage","next","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,cAAcA,EAAG,aAAa,CAACG,MAAM,CAAC,YAAc,OAAO,MAAQP,EAAIQ,UAAUC,MAAM,UAAYT,EAAIU,iBAAiBV,EAAIQ,UAAW,aAAa,WAAaR,EAAIU,iBAAiBV,EAAIQ,UAAW,oBAAoB,WAAaR,EAAIQ,UAAU,aAAeR,EAAIW,aAAa,SAAWX,EAAIY,SAAS,YAAcZ,EAAIa,YAAY,SAAWb,EAAIc,SAAS,YAAcd,EAAIU,iBAAiBV,EAAIQ,UAAW,eAAe,UAAYR,EAAIQ,UAAUO,SAAS,aAAef,EAAIgB,cAAcC,GAAG,CAAC,cAAcjB,EAAIkB,eAAe,IAClpBC,EAAkB,G,iYC8BtB,OACEC,KAAM,kBACNC,WAAY,CACVC,WAAJ,OACIC,WAAJ,QAEEC,MAAO,CACLC,GAAI,CACFC,KAAM,CAACC,OAAQC,QACfC,UAAU,IAGdC,KAZF,WAaI,MAAO,CACLtB,UAAW,GACXG,aAAc,GACdoB,QAAS,GACTnB,SAAU,GACVC,YAAa,GACbC,SAAU,GACVE,aAAc,KAGlBgB,QAAS,CACPtB,iBAAJ,sBACI,iBAFJ,WAEA,8HACA,OADA,SAEA,kBAFA,gBAEA,EAFA,EAEA,KACA,2CACA,8BAJA,8CAOI,cATJ,WASA,uIACA,qBADA,gBACA,EADA,EACA,KACA,qBACA,iBACA,yBACA,iDAEA,4BAPA,8CASI,aAlBJ,SAkBA,wIACA,kBADA,gBACA,EADA,EACA,KACA,8DAFA,8CAKI,cAvBJ,SAuBA,0IACA,kBADA,gBACA,EADA,EACA,WADA,EACA,YACA,0DACA,6DAHA,8CAKI,WA5BJ,WA4BA,6HACA,qBADA,OAEA,kBACA,gCACA,iCAJA,8CAMIQ,WAlCJ,SAkCA,OACA,gBAEM,OADAe,QAAQC,IAAIJ,GACJJ,GACN,KAAK,EAEb,mDACA,MAEQ,KAAK,EAEb,iBACA,sDACA,MAEQ,QACR,SAKE,QA9EF,WA8EA,6HACA,eADA,8CAGES,kBAjFF,SAiFA,OACIlC,KAAKmC,aACLC,MClHiW,I,YCOjWC,EAAY,eACd,EACAvC,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E","file":"js/chunk-2d0e97f2.fbb32416.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video-detail\"},[_c('NeteHeader'),_c('NeteDetail',{attrs:{\"headerTitle\":\"视频详情\",\"title\":_vm.videodata.title,\"avatarUrl\":_vm.getPlayListValue(_vm.videodata, 'avatarUrl'),\"artistName\":_vm.getPlayListValue(_vm.videodata, 'creator.nickname'),\"commonData\":_vm.videodata,\"relatedVideo\":_vm.relatedVideo,\"comments\":_vm.comments,\"hotComments\":_vm.hotComments,\"videoURL\":_vm.videoURL,\"publishTime\":_vm.getPlayListValue(_vm.videodata, 'publishTime'),\"playCount\":_vm.videodata.playTime,\"articulation\":_vm.articulation},on:{\"click-video\":_vm.routerpush}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"video-detail\">\n    <NeteHeader />\n    <NeteDetail\n      headerTitle=\"视频详情\"\n      :title=\"videodata.title\"\n      :avatarUrl=\"getPlayListValue(videodata, 'avatarUrl')\"\n      :artistName=\"getPlayListValue(videodata, 'creator.nickname')\"\n      :commonData=\"videodata\"\n      :relatedVideo=\"relatedVideo\"\n      :comments=\"comments\"\n      :hotComments=\"hotComments\"\n      :videoURL=\"videoURL\"\n      :publishTime=\"getPlayListValue(videodata, 'publishTime')\"\n      :playCount=\"videodata.playTime\"\n      :articulation=\"articulation\"\n      @click-video=\"routerpush\"\n    />\n  </div>\n</template>\n\n<script>\nimport NeteHeader from '@/components/header';\nimport NeteDetail from '@/components/detail';\nimport { getPlayListValue } from '@/utils';\nimport {\n  getVideoDetail,\n  getVideoURL,\n  getVideoComments,\n  getAllRelated,\n} from '@/api';\nexport default {\n  name: 'NeteVideoDetail',\n  components: {\n    NeteDetail,\n    NeteHeader,\n  },\n  props: {\n    id: {\n      type: [String, Number],\n      required: true,\n    },\n  },\n  data() {\n    return {\n      videodata: {},\n      relatedVideo: [],\n      artists: {},\n      comments: [],\n      hotComments: [],\n      videoURL: '',\n      articulation: [],\n    };\n  },\n  methods: {\n    getPlayListValue,\n    async fetchVideoDetail() {\n      const id = this.id;\n      const { data } = await getVideoDetail(id);\n      Object.keys(data).forEach((key) =>\n        this.$set(this.videodata, key, data[key])\n      );\n    },\n    async fetchVideoURL() {\n      const { urls } = await getVideoURL(this.id);\n      const data = urls.slice(0, 1).pop();\n      this.videoURL = data.url;\n      urls.forEach((u, i) => {\n        this.$set(this.articulation, i, { name: u.r, url: u.url });\n      });\n      console.log(this.articulation);\n    },\n    async fetchRelated(id) {\n      const { data } = await getAllRelated(id);\n      data.forEach((d, idx) => this.$set(this.relatedVideo, idx, d));\n    },\n\n    async fetchComments(id) {\n      const { comments, hotComments } = await getVideoComments(id);\n      comments.forEach((c, idx) => this.$set(this.comments, idx, c));\n      hotComments.forEach((c, idx) => this.$set(this.hotComments, idx, c));\n    },\n    async updatePage() {\n      await this.fetchVideoDetail();\n      this.fetchVideoURL();\n      this.fetchRelated(this.videodata.vid);\n      this.fetchComments(this.videodata.vid);\n    },\n    routerpush(data) {\n      const { id, type } = data;\n      console.log(data);\n      switch (type) {\n        case 0: {\n          // mv\n          this.$router.push({ name: 'MVDetail', params: { id: id } });\n          break;\n        }\n        case 1: {\n          // video\n          console.log('1');\n          this.$router.push({ name: 'VideoDetail', params: { id: id } });\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    },\n  },\n  async mounted() {\n    await this.updatePage();\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.updatePage();\n    next();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./video-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./video-detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./video-detail.vue?vue&type=template&id=25161345&\"\nimport script from \"./video-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./video-detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}